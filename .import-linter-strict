[importlinter]
root_package = app

# STRICT DEPENDENCY PATTERN ENFORCEMENT
# api → use_cases → domain
# use_cases → ports  
# adapters → ports (+ core)
# No feature-to-feature imports

[importlinter:contract:no-cross-feature-imports]
name = No feature-to-feature imports
type = forbidden
source_modules = 
    app.features.auth
    app.features.bookings
    app.features.services
    app.features.vehicles
forbidden_modules = 
    app.features.auth
    app.features.bookings
    app.features.services
    app.features.vehicles

[importlinter:contract:api-to-use-cases-only]
name = API layer can only import use_cases (not domain/adapters)
type = forbidden
source_modules = 
    app.features.*.api
forbidden_modules = 
    app.features.*.domain
    app.features.*.adapters

[importlinter:contract:use-cases-to-domain-and-ports]
name = Use cases can only import domain and ports
type = forbidden
source_modules = 
    app.features.*.use_cases
forbidden_modules = 
    app.features.*.api
    app.features.*.adapters

[importlinter:contract:adapters-to-ports-and-core-only]
name = Adapters can only import ports and core
type = forbidden
source_modules = 
    app.features.*.adapters
forbidden_modules = 
    app.features.*.domain
    app.features.*.use_cases
    app.features.*.api

[importlinter:contract:domain-is-pure]
name = Domain has no external dependencies
type = forbidden
source_modules = 
    app.features.*.domain
forbidden_modules = 
    app.features.*.api
    app.features.*.use_cases
    app.features.*.adapters
    app.features.*.ports
    app.core
    fastapi
    pydantic
    sqlalchemy

[importlinter:contract:ports-define-interfaces]
name = Ports can only import domain (to define interfaces)
type = forbidden
source_modules = 
    app.features.*.ports
forbidden_modules = 
    app.features.*.api
    app.features.*.use_cases
    app.features.*.adapters

[importlinter:contract:core-is-infrastructure]
name = Core is pure infrastructure
type = forbidden
source_modules = 
    app.core
forbidden_modules = 
    app.features
    
[importlinter:contract:interfaces-does-composition]
name = Interfaces layer only does composition
type = forbidden
source_modules = 
    app.interfaces
forbidden_modules = 
    app.features.*.domain
    app.features.*.use_cases
    app.features.*.adapters
    app.features.*.ports