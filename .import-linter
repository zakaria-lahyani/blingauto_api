[importlinter]
root_package = app

[importlinter:contract:forbidden-cross-feature-imports]
name = Cross-feature imports are forbidden
type = forbidden
source_modules = 
    app.features.auth
    app.features.bookings
    app.features.services
    app.features.vehicles
forbidden_modules = 
    app.features.auth
    app.features.bookings
    app.features.services
    app.features.vehicles
allow_indirect_imports = True

[importlinter:contract:layered-auth-architecture]
name = Auth feature must follow clean architecture layers
type = layers
layers = 
    app.features.auth.api
    app.features.auth.use_cases
    app.features.auth.domain

[importlinter:contract:layered-bookings-architecture]
name = Bookings feature must follow clean architecture layers
type = layers
layers = 
    app.features.bookings.api
    app.features.bookings.use_cases
    app.features.bookings.domain

[importlinter:contract:layered-services-architecture]
name = Services feature must follow clean architecture layers
type = layers
layers = 
    app.features.services.api
    app.features.services.use_cases
    app.features.services.domain

[importlinter:contract:layered-vehicles-architecture]
name = Vehicles feature must follow clean architecture layers
type = layers
layers = 
    app.features.vehicles.api
    app.features.vehicles.use_cases
    app.features.vehicles.domain

[importlinter:contract:domain-purity-auth]
name = Auth domain must have no framework dependencies
type = forbidden
source_modules = app.features.auth.domain
forbidden_modules = 
    fastapi
    pydantic
    sqlalchemy
    redis
    celery

[importlinter:contract:domain-purity-bookings]
name = Bookings domain must have no framework dependencies
type = forbidden
source_modules = app.features.bookings.domain
forbidden_modules = 
    fastapi
    pydantic
    sqlalchemy
    redis
    celery

[importlinter:contract:domain-purity-services]
name = Services domain must have no framework dependencies
type = forbidden
source_modules = app.features.services.domain
forbidden_modules = 
    fastapi
    pydantic
    sqlalchemy
    redis
    celery

[importlinter:contract:domain-purity-vehicles]
name = Vehicles domain must have no framework dependencies
type = forbidden
source_modules = app.features.vehicles.domain
forbidden_modules = 
    fastapi
    pydantic
    sqlalchemy
    redis
    celery

[importlinter:contract:no-adapter-imports-in-domain]
name = Domain layers cannot import from adapters
type = forbidden
source_modules = 
    app.features.*.domain
forbidden_modules = 
    app.features.*.adapters

[importlinter:contract:no-api-imports-in-use-cases]
name = Use cases cannot import from API layer
type = forbidden
source_modules = 
    app.features.*.use_cases
forbidden_modules = 
    app.features.*.api